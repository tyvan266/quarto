{
  "hash": "82f18a29b64fc11d48d668e5fe83738a",
  "result": {
    "markdown": "---\ntitle: 'Thinking about event frequencies'\ndate: '2023-11-11'\ndescription: 'Describing rates over time for the layman' \nexecute: \n  message: false\n  warning: false\neditor_options: \n  chunk_output_type: console\ncode-annotations: true\ntoc: true\ntoc-depth: 3\n---\n\n\n# Events over time \n\nConsider longitudinal data in long-format, each row representing an event occurrence at some date\n\n\nFor simplicity, suppose we have 5 subjects, and each subject experiences some number of events between 10 - 20, occuring within a 5 year time frame from 2015 - 2020. \n\nIn medicine, such events may represent: doctor visits, treatment times, exposure incidences, etc. \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(ggplot2)\n\nset.seed(12345)\n\nevent_num <- sample(5:15, 5, replace = T)\nN_rows    <- sum(event_num) \n\n\npt_events <- \n  data.frame(\n    ID = rep(1:5, event_num), \n    # random occurrences \n    EventDate = sample(seq(as.Date('2015-01-01'), as.Date('2020-01-01'), by = \"day\"), N_rows)\n  )\n```\n:::\n\n\n\nA quick way to get a glimpse for the *patterns* of event occurrences is to plot them by patient (subject) using dots to represent along the x-axis the relative timing of event occurrences.  \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pt_events, aes(x = EventDate, y = ID, color = factor(ID))) + \n  geom_point(size = 2) + \n  geom_line(linewidth = 1) \n```\n\n::: {.cell-output-display}\n![](post_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nAlthough we generated events uniformly over the times, interesting patterns can still emerge. Within patients, events may cluster closer to the beginning or end of the study period. Some patients may appear to have occurences mroe *regularly* or evenly spaced, while others have relatively few occurrences in total. \n\nThere are a variety of ways to describe the event rates, with the goal to communicate a general sense of activity levels. Depending on the problem, we may develop different inclusion/ exclusion criterions. \n\n\n# Annualized rate \n\nA simple metric, but ignores potential clustering effects. Defined by \n\n$$ total events / number of years $$ \n\n# Average time between events\n\nThis provides a closer sense of the regularity. \n\n# Maximum time between two consecutive events \n\nThis gets at the evenness (?) more or frequency per time ?, and often used for inclusion criterion. If the max time is less than 1 year, then it must be the case that patients are having activity at least every year. \n\nSometimes people talk about a rolling time frame, which is just like a sliding time window: there is always some event within a one year window over the period of question. Usually the motivation is capture some notion of **consistency** \n\n# Minimum time between two consecutive events \n\n\nEvents of the same type appearing too close together may be sources of error, noise, or other uncertainty. Here, *subject matter knowledge* is important. For example, if there events are weight measurements, then we do not expect values event a few short days apart to be very different, and instead want to attribute such observed differences as *noise*, and may apply a smoothing operation to values in a short window, in the end pegging the event date perhaps to the earliest time, latest time, of middle time within the window. \n\n\n\n",
    "supporting": [
      "post_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}